{"version":3,"sources":["webpack:///./src/assets/icons/upload.svg","webpack:///./src/api/qiniu-token.js","webpack:///src/components/vqiniu.vue","webpack:///./src/components/vqiniu.vue?4790","webpack:///./src/components/vqiniu.vue","webpack:///src/page/setting/userprofile.vue","webpack:///./src/page/setting/userprofile.vue?a8a6","webpack:///./src/page/setting/userprofile.vue"],"names":["module","exports","qiniu_token","APPLY_QINIUUPLOADTOKEN_API","QINIU_UPLOAD_HTTP_API","QINIU_UPLOAD_HTTPS_API","vqiniu","methods","extends_default","Object","vuex_esm","data","uploadFileToQiniu","message","this","currentTarget","file","size","type","toLowerCase","uploadButtonOnClick","reset","FileReader","result","fileSuffixName","_this","FormData","token","self","key","formData","then","response","url","_this2","image","res","components_vqiniu","render","_vm","_h","$createElement","_c","_self","staticClass","successImages","length","_v","_s","imgtype","_l","index","attrs","name","nativeOn","click","$event","DeleteFileFromQiniu","src","num","_e","error","id","title","accept","on","change","fileInputOnChange","__webpack_require__","alt","autoUpload","disabled","buttonAvailable","staticRenderFns","src_components_vqiniu","normalizeComponent","ssrContext","userprofile","Vqiniu","CellGroup","ydui_rem","CellItem","Input","computed","api_api","userInfo","username","userimg","catch","getUserinfo","setting_userprofile","slot","to","required","max","placeholder","model","value","callback","$$v","$set","expression","maxlength","arrow","updateUserInfo","userprofile_Component","userprofile_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/3.03de542a9f305d6fc106.js","sourcesContent":["module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTIyNjQ5Nzk1MjU1IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUxOTYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTQ0OCA1NzYgNTc2IDU3NiA1NzYgMzIwIDc2OCAzMjAgNTEyIDY0IDI1NiAzMjAgNDQ4IDMyMHpNNjQwIDQzMiA2NDAgNTMwLjcyIDkzMy4wNTYgNjQwIDUxMiA3OTcuMDI0IDkwLjk0NCA2NDAgMzg0IDUzMC43MiAzODQgNDMyIDAgNTc2IDAgODMyIDUxMiAxMDI0IDEwMjQgODMyIDEwMjQgNTc2eiIgcC1pZD0iNTE5NyIgZmlsbD0iI0ZGNjg1RCI+PC9wYXRoPjwvc3ZnPg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/icons/upload.svg\n// module id = QOvy\n// module chunks = 3","\nlet api;\n\nif (process.env.NODE_ENV === 'production') {\n  // 注意请修改为生产环境 API 地址\n  // api = 'https://vue-qiniu-uploader.herokuapp.com/qiniu/token';\n  api = 'http://api.agentily.com/qiniu/';\n} else {\n  api = 'http://127.0.0.1:8000/qiniu/';\n}\n\n\nexport default {\n  // 注意运行后端：python3 app.py\n  APPLY_QINIUUPLOADTOKEN_API: api,\n  // 上传服务器域名，上传到华东一区的域名为up.qiniu.com、up-z0.qiniu.com和upload.qiniu.com\n  // 上传到华北一区的域名为up-z1.qiniu.com和upload-z1.qiniu.com\n  QINIU_UPLOAD_HTTP_API: 'http://up-z0.qiniu.com',\n  QINIU_UPLOAD_HTTPS_API: 'https://up.qbox.me',\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/qiniu-token.js","<template>\n  <div class=\"uploader\">\n    <!--上传成功的图片-->\n    <div class=\"success-images\" v-if=\"successImages != null && successImages.length > 0\">\n\n      \n      <!-- <img v-for=\"(image, index) in successImages\" :src=\"image\" :key=\"index\" /> -->\n      <p>上传列表{{imgtype}}+{{successImages}}</p>\n    \n        <div class=\"uploaded-wrapper\">\n          <div class=\"upload-item\" v-for=\"image, index in successImages\" :key=\"index\">\n            <yd-icon name=\"error-outline\" class=\"deleteIcon\" @click.native=\"DeleteFileFromQiniu(image)\"></yd-icon>\n            <img :src=\"'http://' + image\" :num=\"successImages.length\" class=\"uploadedImg\" >\n            </img>\n          </div>\n        </div>\n    </div>\n    \n    <!-- 提示错误信息 -->\n    <p class=\"error-color\" v-if=\"error != null\">错误信息：{{error}}</p>\n    \n    <!-- 标题 -->\n\n    <!-- 预览窗口 -->\n    <div class=\"preview\" v-if=\"file.size != null\">\n        <img id=\"image\" />\n        <h3>文件大小：{{file.size / 1024}} KB</h3>\n        <h3>文件类型：{{file.type}}</h3>\n    </div>\n    \n    <!-- 上传窗口 -->\n    <!-- <input type=\"checkbox\" v-model=\"autoUpload\"> -->\n    <div class=\"upload-btn\">\n      <input class=\"upload-img\" title=\"\" type=\"file\" accept=\"image/*\" name=\"file\" @change=\"fileInputOnChange($event)\" />\n      <img src=\"../assets/icons/upload.svg\" alt=\"\">\n      <p>Upload</p>\n    </div>\n    <button v-if=\"!autoUpload\" @click=\"uploadButtonOnClick()\" :disabled=\"file.size != null && buttonAvailable ? null :'disabled'\">Upload</button>\n  </div>\n</template>\n\n<script>\nimport url from '@/api/qiniu-token';\nimport {APIQiniuDelete} from '@/api/api'\nimport {mapState, mapMutations} from 'vuex'\nexport default {\n  props: ['imgtype'],\n  data() {\n    return {\n      error: null,\n      // 按钮可用状态\n      buttonAvailable: true,\n      // 自动上传\n      autoUpload: true,\n      file: {\n        self: null,\n        size: null,\n        type: null,\n        suffix: null,\n      },\n      // 服务器返回的令牌和一些信息\n      serverToken: {\n        token: null,\n        expire: null,\n        key: null,\n        url: null,\n      },\n      successImages: [],\n    };\n  },\n  computed: {\n  },\n  activated() {\n    this.$store.state.roomimg = null\n  },\n  methods: {\n    ...mapMutations(['addroomimg','deleteroomimg','adduserimg','deleteuserimg']),\n    // 上传按钮被点击\n    uploadButtonOnClick() {\n      // 临时禁用上传按钮\n      this.buttonAvailable = false;\n      // 申请 token 成功回调\n      const okCallBack = function (data) {\n        this.serverToken = data;\n        // 上传到七牛\n        this.uploadFileToQiniu();\n      };\n      // 申请 token 失败回调\n      const failCallBack = function (message) {\n        this.buttonAvailable = true;\n        this.error = message;\n      };\n      // 获取上传 token\n      this.applyUploadToken(this.file.suffix, okCallBack.bind(this), failCallBack.bind(this));\n    },\n    fileInputOnChange(event) {\n      const el = event.currentTarget;\n      const file = el.files[0];\n      // 判断用户是否选择文件\n      if (file != null) {\n        // 显示预览\n        this.showPreview = true;\n        this.file = {\n          self: file,\n          size: file.size,\n          type: file.type,\n          suffix: file.name.substring((file.name.lastIndexOf('.') + 1), file.name.length).toLowerCase(),\n        };\n        this.previewImage(file);\n        // 判断自动上传\n        if (this.autoUpload) {\n          this.uploadButtonOnClick();\n        }\n      } else {\n        this.reset();\n      }\n    },\n    // 恢复默认\n    reset() {\n      this.file = {\n        self: null,\n        size: null,\n        type: null,\n        suffix: null,\n      };\n      this.error = null;\n      this.buttonAvailable = true;\n    },\n    // 预览图片\n    previewImage(file) {\n      if (window.FileReader) {\n        const fileReader = new FileReader();\n        fileReader.onloadend = function (e) {\n          const image = document.querySelector('.preview #image');\n          image.src = e.target.result;\n        };\n        fileReader.readAsDataURL(file);\n      } else {\n        console.warn('不支持 FileReader');\n      }\n    },\n    // 申请上传 token\n    applyUploadToken(fileSuffixName, successCallBack, errorCallBack) {\n      const requestData = {\n        suffix: fileSuffixName,\n      };\n      // 请求api\n      this.$http.post(url.APPLY_QINIUUPLOADTOKEN_API, requestData).then((response) => {\n        if (response.status === 200) {\n          // 回调\n          successCallBack(response.data)\n          console.log(response.data)\n        } else {\n          errorCallBack('向服务器请求上传 token 失败');\n        }\n      }, () => {\n        errorCallBack('检查您的网络连接');\n      });\n    },\n    uploadFileToQiniu() {\n      if (this.file.self != null) {\n        console.log('开始上传文件');\n        // 构建表单\n        const formData = new FormData();\n        formData.append('token', this.serverToken.token);\n        formData.append('file', this.file.self);\n        formData.append('key', this.serverToken.key);\n        \n        // 上传\n        this.axios({\n          method: 'post',\n          url: url.QINIU_UPLOAD_HTTP_API,\n          // 注意：请求头设置（必须！）\n          headers: { 'Content-Type': 'multipart/form-data' },\n          data: formData,\n        }).then((response) => {\n          if (response.status === 200) {\n\n            this.successImages.push(this.serverToken.url);\n            // console.log(this.serverToken.url + 111)\n\n            let img = this.serverToken.url\n\n            if (this.imgtype === 'profile') {\n              this.adduserimg(img) //如果是在用户中心，就上传图片到用户中心\n            }else{\n              this.addroomimg(img) // 如果在房源，就上传到房源\n            }\n            this.reset();\n          }\n        }, () => {\n          this.error = '上传文件到七牛异常';\n        });\n      } else {\n        this.error = '上传文件到七牛异常';\n      }\n    },\n\n    DeleteFileFromQiniu(image) {\n\n      APIQiniuDelete({\n        'image': image\n      }).then( res => {\n        console.log(res)\n        this.successImages.pop(image) // 从后端删除图片\n\n        if (this.imgtype === 'profile') {\n          this.deleteuserimg(image) // 从state 删除图片\n        }else{\n          this.deleteroomimg(image) // shan\n        }\n\n\n      }).catch( err => { console.log(err) })\n    }\n  },\n};\n</script>\n\n\n<style scoped>\n.upload-btn{\ndisplay: inline-block;\nposition: relative;\npadding: 20px;\noverflow: hidden;\nbackground-color: #fff;\n-webkit-box-shadow: 0 2px 6px 0 hsla(205,9%,48%,.14);\nbox-shadow: 0 2px 6px 0 hsla(205,9%,48%,.14);\nborder-radius: 5px;\n\n}\n.upload-img{\n\nposition: absolute;\nwidth: 100%;\nheight: 100%;\ntop: 0;\nleft: 0;\noutline: none;\nbackground-color: transparent;\nfilter:alpha(opacity=0);\n\n-moz-opacity:0;\n\n-khtml-opacity: 0;\n\nopacity: 0;\n\n}\n.success-images ul{\n  list-style: none;\n  font-size: 14px;\n}\n.success-images ul li p {\n  margin: 7px 0px;\n}\n.uploader .preview {\n  margin-bottom: 20px;\n}\n.preview #image {\n  max-width: 500px;\n  max-height: 400px;\n  overflow: hidden;\n}\n.uploader .error-color {\n  color:red;\n}\n.uploader button, .uploader input {\n  outline: none;\n}\n.uploader button {\n  border-radius: 4px;\n  cursor: pointer;\n}.upload-item{\n  width: 50%;\n}\n.uploadedImg{\n  width: 100%\n}\n.uploaded-wrapper .deleteIcon{\n\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/vqiniu.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"uploader\"},[(_vm.successImages != null && _vm.successImages.length > 0)?_c('div',{staticClass:\"success-images\"},[_c('p',[_vm._v(\"上传列表\"+_vm._s(_vm.imgtype)+\"+\"+_vm._s(_vm.successImages))]),_vm._v(\" \"),_c('div',{staticClass:\"uploaded-wrapper\"},_vm._l((_vm.successImages),function(image,index){return _c('div',{key:index,staticClass:\"upload-item\"},[_c('yd-icon',{staticClass:\"deleteIcon\",attrs:{\"name\":\"error-outline\"},nativeOn:{\"click\":function($event){_vm.DeleteFileFromQiniu(image)}}}),_vm._v(\" \"),_c('img',{staticClass:\"uploadedImg\",attrs:{\"src\":'http://' + image,\"num\":_vm.successImages.length}})],1)}))]):_vm._e(),_vm._v(\" \"),(_vm.error != null)?_c('p',{staticClass:\"error-color\"},[_vm._v(\"错误信息：\"+_vm._s(_vm.error))]):_vm._e(),_vm._v(\" \"),(_vm.file.size != null)?_c('div',{staticClass:\"preview\"},[_c('img',{attrs:{\"id\":\"image\"}}),_vm._v(\" \"),_c('h3',[_vm._v(\"文件大小：\"+_vm._s(_vm.file.size / 1024)+\" KB\")]),_vm._v(\" \"),_c('h3',[_vm._v(\"文件类型：\"+_vm._s(_vm.file.type))])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"upload-btn\"},[_c('input',{staticClass:\"upload-img\",attrs:{\"title\":\"\",\"type\":\"file\",\"accept\":\"image/*\",\"name\":\"file\"},on:{\"change\":function($event){_vm.fileInputOnChange($event)}}}),_vm._v(\" \"),_c('img',{attrs:{\"src\":require(\"../assets/icons/upload.svg\"),\"alt\":\"\"}}),_vm._v(\" \"),_c('p',[_vm._v(\"Upload\")])]),_vm._v(\" \"),(!_vm.autoUpload)?_c('button',{attrs:{\"disabled\":_vm.file.size != null && _vm.buttonAvailable ? null :'disabled'},on:{\"click\":function($event){_vm.uploadButtonOnClick()}}},[_vm._v(\"Upload\")]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7efd3874\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/vqiniu.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7efd3874\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./vqiniu.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./vqiniu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./vqiniu.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7efd3874\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./vqiniu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7efd3874\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/vqiniu.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"profile-wrapper\">\n\n      <yd-navbar title=\"Your profile\">\n            <router-link to=\"/setting\" slot=\"left\">\n                <yd-navbar-back-icon>back</yd-navbar-back-icon>\n            </router-link>\n        </yd-navbar>\n      <h1 class=\"bigtitle\"></h1>\n\n\n\n      <yd-cell-group title=\"Picture\">\n          \n            <Vqiniu imgtype=\"profile\"></Vqiniu>\n          \n      </yd-cell-group>\n\n      <yd-cell-group title=\"Name\">\n          <yd-cell-item>\n            <span slot=\"left\"> </span>\n            <yd-input slot=\"right\" type=\"text\" required max=\"20\" placeholder=\" Your name\" v-model=\"userInfo.username\"></yd-input>\n          </yd-cell-item>\n      </yd-cell-group>\n\n\n       <yd-cell-group title=\"About me\">\n          <yd-cell-item>\n                <yd-textarea slot=\"right\" placeholder=\"tell a little about yourself\" maxlength=\"200\"></yd-textarea>\n          </yd-cell-item>\n      </yd-cell-group>\n\n      <yd-cell-group title=\"What do you do?\">\n          <yd-cell-item>\n                <yd-input slot=\"right\" type=\"text\" required max=\"20\" placeholder=\" \" ></yd-input>\n          </yd-cell-item>\n      </yd-cell-group>\n\n      <yd-cell-group title=\"Gender\">\n        <yd-cell-item arrow>\n                <select slot=\"right\">\n                    <option value=\"1\">male</option>\n                    <option value=\"2\">female</option>\n                    <option value=\"3\">others</option>\n                </select>\n        </yd-cell-item>\n    </yd-cell-group>\n\n    <yd-cell-group title=\"My ideal living location\">\n        <yd-cell-item arrow>\n                <select slot=\"right\">\n                    <option value=\"1\">guy</option>\n                    <option value=\"2\">girl</option>\n                    <option value=\"3\">other</option>\n                </select>\n        </yd-cell-item>\n    </yd-cell-group>\n\n    <yd-button-group>\n        <yd-button size=\"large\" @click.native=\"updateUserInfo\" type=\"primary\">Save</yd-button>\n    </yd-button-group>\n\n  </div>\n</template>\n\n<script>\nimport Vqiniu from '@/components/vqiniu'\nimport {APIuser,APIupdateuserinfo} from '../../api/api'\nimport cookie from '../../static/js/cookie'\n\nimport {Input,CellGroup,CellItem} from 'vue-ydui'\nimport {mapState} from 'vuex'\nexport default {\n    components:{\n        Vqiniu,\n        CellGroup,\n        CellItem,\n        Input\n    },\n    data () {\n        return {\n            userInfo:{\n                username:'',\n                profile:[],\n            }\n        }\n    },\n    computed:{\n        ...mapState(['userimg']),\n    },\n    methods: {\n        \n        getUserinfo () {\n            this.userInfo.username = cookie.getCookie('username')\n            APIuser(\n                this.userInfo.username\n            ).then( res => {\n                this.userInfo = res.data\n            })\n        },\n        updateUserInfo() {\n            console.log(this.userimg)\n            this.userInfo.profile  = this.userimg.join(',')\n            APIupdateuserinfo(\n                this.userInfo\n            ).then( res => {\n                this.res\n            }).catch()\n        },\n        \n    },\n    created () {\n        this.getUserinfo()\n    },\n    activated () {\n        this.userimg = null\n    }\n}\n</script>\n<style lang=\"stylus\" scoped>\n.headimg\n    width 100%\n    height 200px\n    .bigone\n        width 60%\n        background #dddddd\n        height 220px\n        display inline-block\n    .smallone\n        width 30%\n        height 220px\n        display inline-block\n        .one\n            height 100px\n            margin-bottom 10px\n            background #dddddd\n\n</style>\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/page/setting/userprofile.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"profile-wrapper\"},[_c('yd-navbar',{attrs:{\"title\":\"Your profile\"}},[_c('router-link',{attrs:{\"slot\":\"left\",\"to\":\"/setting\"},slot:\"left\"},[_c('yd-navbar-back-icon',[_vm._v(\"back\")])],1)],1),_vm._v(\" \"),_c('h1',{staticClass:\"bigtitle\"}),_vm._v(\" \"),_c('yd-cell-group',{attrs:{\"title\":\"Picture\"}},[_c('Vqiniu',{attrs:{\"imgtype\":\"profile\"}})],1),_vm._v(\" \"),_c('yd-cell-group',{attrs:{\"title\":\"Name\"}},[_c('yd-cell-item',[_c('span',{attrs:{\"slot\":\"left\"},slot:\"left\"}),_vm._v(\" \"),_c('yd-input',{attrs:{\"slot\":\"right\",\"type\":\"text\",\"required\":\"\",\"max\":\"20\",\"placeholder\":\" Your name\"},slot:\"right\",model:{value:(_vm.userInfo.username),callback:function ($$v) {_vm.$set(_vm.userInfo, \"username\", $$v)},expression:\"userInfo.username\"}})],1)],1),_vm._v(\" \"),_c('yd-cell-group',{attrs:{\"title\":\"About me\"}},[_c('yd-cell-item',[_c('yd-textarea',{attrs:{\"slot\":\"right\",\"placeholder\":\"tell a little about yourself\",\"maxlength\":\"200\"},slot:\"right\"})],1)],1),_vm._v(\" \"),_c('yd-cell-group',{attrs:{\"title\":\"What do you do?\"}},[_c('yd-cell-item',[_c('yd-input',{attrs:{\"slot\":\"right\",\"type\":\"text\",\"required\":\"\",\"max\":\"20\",\"placeholder\":\" \"},slot:\"right\"})],1)],1),_vm._v(\" \"),_c('yd-cell-group',{attrs:{\"title\":\"Gender\"}},[_c('yd-cell-item',{attrs:{\"arrow\":\"\"}},[_c('select',{attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\"male\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"2\"}},[_vm._v(\"female\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"3\"}},[_vm._v(\"others\")])])])],1),_vm._v(\" \"),_c('yd-cell-group',{attrs:{\"title\":\"My ideal living location\"}},[_c('yd-cell-item',{attrs:{\"arrow\":\"\"}},[_c('select',{attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\"guy\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"2\"}},[_vm._v(\"girl\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"3\"}},[_vm._v(\"other\")])])])],1),_vm._v(\" \"),_c('yd-button-group',[_c('yd-button',{attrs:{\"size\":\"large\",\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.updateUserInfo($event)}}},[_vm._v(\"Save\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b0556ed2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/setting/userprofile.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b0556ed2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./userprofile.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./userprofile.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./userprofile.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b0556ed2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./userprofile.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b0556ed2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/setting/userprofile.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}