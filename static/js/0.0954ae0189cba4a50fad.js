webpackJsonp([0],{"1kS7":function(t,e){e.f=Object.getOwnPropertySymbols},CPEB:function(t,e){},Dd8w:function(t,e,i){"use strict";e.__esModule=!0;var s,l=i("woOf"),n=(s=l)&&s.__esModule?s:{default:s};e.default=n.default||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}},FrBS:function(t,e){},NpIQ:function(t,e){e.f={}.propertyIsEnumerable},QOvy:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTIyNjQ5Nzk1MjU1IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUxOTYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTQ0OCA1NzYgNTc2IDU3NiA1NzYgMzIwIDc2OCAzMjAgNTEyIDY0IDI1NiAzMjAgNDQ4IDMyMHpNNjQwIDQzMiA2NDAgNTMwLjcyIDkzMy4wNTYgNjQwIDUxMiA3OTcuMDI0IDkwLjk0NCA2NDAgMzg0IDUzMC43MiAzODQgNDMyIDAgNTc2IDAgODMyIDUxMiAxMDI0IDEwMjQgODMyIDEwMjQgNTc2eiIgcC1pZD0iNTE5NyIgZmlsbD0iI0ZGNjg1RCI+PC9wYXRoPjwvc3ZnPg=="},R4wc:function(t,e,i){var s=i("kM2E");s(s.S+s.F,"Object",{assign:i("To3L")})},To3L:function(t,e,i){"use strict";var s=i("lktj"),l=i("1kS7"),n=i("NpIQ"),o=i("sB3e"),r=i("MU5D"),a=Object.assign;t.exports=!a||i("S82l")(function(){var t={},e={},i=Symbol(),s="abcdefghijklmnopqrst";return t[i]=7,s.split("").forEach(function(t){e[t]=t}),7!=a({},t)[i]||Object.keys(a({},e)).join("")!=s})?function(t,e){for(var i=o(t),a=arguments.length,u=1,c=l.f,d=n.f;a>u;)for(var f,p=r(arguments[u++]),g=c?s(p).concat(c(p)):s(p),v=g.length,m=0;v>m;)d.call(p,f=g[m++])&&(i[f]=p[f]);return i}:a},V3tA:function(t,e,i){i("R4wc"),t.exports=i("FeBl").Object.assign},lQzA:function(t,e,i){"use strict";var s=i("Dd8w"),l=i.n(s),n={APPLY_QINIUUPLOADTOKEN_API:"http://api.agentily.com/qiniu/",QINIU_UPLOAD_HTTP_API:"http://up-z0.qiniu.com",QINIU_UPLOAD_HTTPS_API:"https://up.qbox.me"},o=i("P9l9"),r=i("NYxO"),a={props:["imgtype"],data:function(){return{error:null,buttonAvailable:!0,autoUpload:!0,file:{self:null,size:null,type:null,suffix:null},serverToken:{token:null,expire:null,key:null,url:null},successImages:[]}},computed:{},activated:function(){this.$store.state.roomimg=null},methods:l()({},Object(r.b)(["addroomimg","deleteroomimg","adduserimg","deleteuserimg"]),{uploadButtonOnClick:function(){this.buttonAvailable=!1;this.applyUploadToken(this.file.suffix,function(t){this.serverToken=t,this.uploadFileToQiniu()}.bind(this),function(t){this.buttonAvailable=!0,this.error=t}.bind(this))},fileInputOnChange:function(t){var e=t.currentTarget.files[0];null!=e?(this.showPreview=!0,this.file={self:e,size:e.size,type:e.type,suffix:e.name.substring(e.name.lastIndexOf(".")+1,e.name.length).toLowerCase()},this.previewImage(e),this.autoUpload&&this.uploadButtonOnClick()):this.reset()},reset:function(){this.file={self:null,size:null,type:null,suffix:null},this.error=null,this.buttonAvailable=!0},previewImage:function(t){if(window.FileReader){var e=new FileReader;e.onloadend=function(t){document.querySelector(".preview #image").src=t.target.result},e.readAsDataURL(t)}else console.warn("不支持 FileReader")},applyUploadToken:function(t,e,i){var s={suffix:t};this.$http.post(n.APPLY_QINIUUPLOADTOKEN_API,s).then(function(t){200===t.status?(e(t.data),console.log(t.data)):i("向服务器请求上传 token 失败")},function(){i("检查您的网络连接")})},uploadFileToQiniu:function(){var t=this;if(null!=this.file.self){console.log("开始上传文件");var e=new FormData;e.append("token",this.serverToken.token),e.append("file",this.file.self),e.append("key",this.serverToken.key),this.axios({method:"post",url:n.QINIU_UPLOAD_HTTP_API,headers:{"Content-Type":"multipart/form-data"},data:e}).then(function(e){if(200===e.status){t.successImages.push(t.serverToken.url);var i=t.serverToken.url;"profile"===t.imgtype?t.adduserimg(i):t.addroomimg(i),t.reset()}},function(){t.error="上传文件到七牛异常"})}else this.error="上传文件到七牛异常"},DeleteFileFromQiniu:function(t){var e=this;Object(o.b)({image:t}).then(function(i){console.log(i),e.successImages.pop(t),"profile"===e.imgtype?e.deleteuserimg(t):e.deleteroomimg(t)}).catch(function(t){console.log(t)})}})},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"uploader"},[null!=t.successImages&&t.successImages.length>0?s("div",{staticClass:"success-images"},[s("p",[t._v("上传列表"+t._s(t.imgtype)+"+"+t._s(t.successImages))]),t._v(" "),s("div",{staticClass:"uploaded-wrapper"},t._l(t.successImages,function(e,i){return s("div",{key:i,staticClass:"upload-item"},[s("yd-icon",{staticClass:"deleteIcon",attrs:{name:"error-outline"},nativeOn:{click:function(i){t.DeleteFileFromQiniu(e)}}}),t._v(" "),s("img",{staticClass:"uploadedImg",attrs:{src:"http://"+e,num:t.successImages.length}})],1)}))]):t._e(),t._v(" "),null!=t.error?s("p",{staticClass:"error-color"},[t._v("错误信息："+t._s(t.error))]):t._e(),t._v(" "),null!=t.file.size?s("div",{staticClass:"preview"},[s("img",{attrs:{id:"image"}}),t._v(" "),s("h3",[t._v("文件大小："+t._s(t.file.size/1024)+" KB")]),t._v(" "),s("h3",[t._v("文件类型："+t._s(t.file.type))])]):t._e(),t._v(" "),s("div",{staticClass:"upload-btn"},[s("input",{staticClass:"upload-img",attrs:{title:"",type:"file",accept:"image/*",name:"file"},on:{change:function(e){t.fileInputOnChange(e)}}}),t._v(" "),s("img",{attrs:{src:i("QOvy"),alt:""}}),t._v(" "),s("p",[t._v("Upload")])]),t._v(" "),t.autoUpload?t._e():s("button",{attrs:{disabled:null!=t.file.size&&t.buttonAvailable?null:"disabled"},on:{click:function(e){t.uploadButtonOnClick()}}},[t._v("Upload")])])},staticRenderFns:[]};var c=i("VU/8")(a,u,!1,function(t){i("CPEB")},"data-v-7efd3874",null);e.a=c.exports},woOf:function(t,e,i){t.exports={default:i("V3tA"),__esModule:!0}},xiKa:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("Dd8w"),l=i.n(s),n=i("lQzA"),o=i("P9l9"),r=i("u4WU"),a=i("r8FW"),u=i("NYxO"),c={components:{Vqiniu:n.a,CellGroup:a.CellGroup,CellItem:a.CellItem,Input:a.Input},data:function(){return{userInfo:{username:"",profile:[]}}},computed:l()({},Object(u.c)(["userimg"])),methods:{getUserinfo:function(){var t=this;this.userInfo.username=r.a.getCookie("username"),Object(o.i)(this.userInfo.username).then(function(e){t.userInfo=e.data})},updateUserInfo:function(){var t=this;console.log(this.userimg),this.userInfo.profile=this.userimg.join(","),Object(o.g)(this.userInfo).then(function(e){t.res}).catch()}},created:function(){this.getUserinfo()},activated:function(){this.userimg=null}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"profile-wrapper"},[i("yd-navbar",{attrs:{title:"Your profile"}},[i("router-link",{attrs:{slot:"left",to:"/setting"},slot:"left"},[i("yd-navbar-back-icon",[t._v("back")])],1)],1),t._v(" "),i("h1",{staticClass:"bigtitle"}),t._v(" "),i("yd-cell-group",{attrs:{title:"Picture"}},[i("Vqiniu",{attrs:{imgtype:"profile"}})],1),t._v(" "),i("yd-cell-group",{attrs:{title:"Name"}},[i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"}),t._v(" "),i("yd-input",{attrs:{slot:"right",type:"text",required:"",max:"20",placeholder:" Your name"},slot:"right",model:{value:t.userInfo.username,callback:function(e){t.$set(t.userInfo,"username",e)},expression:"userInfo.username"}})],1)],1),t._v(" "),i("yd-cell-group",{attrs:{title:"About me"}},[i("yd-cell-item",[i("yd-textarea",{attrs:{slot:"right",placeholder:"tell a little about yourself",maxlength:"200"},slot:"right"})],1)],1),t._v(" "),i("yd-cell-group",{attrs:{title:"What do you do?"}},[i("yd-cell-item",[i("yd-input",{attrs:{slot:"right",type:"text",required:"",max:"20",placeholder:" "},slot:"right"})],1)],1),t._v(" "),i("yd-cell-group",{attrs:{title:"Gender"}},[i("yd-cell-item",{attrs:{arrow:""}},[i("select",{attrs:{slot:"right"},slot:"right"},[i("option",{attrs:{value:"1"}},[t._v("male")]),t._v(" "),i("option",{attrs:{value:"2"}},[t._v("female")]),t._v(" "),i("option",{attrs:{value:"3"}},[t._v("others")])])])],1),t._v(" "),i("yd-cell-group",{attrs:{title:"My ideal living location"}},[i("yd-cell-item",{attrs:{arrow:""}},[i("select",{attrs:{slot:"right"},slot:"right"},[i("option",{attrs:{value:"1"}},[t._v("guy")]),t._v(" "),i("option",{attrs:{value:"2"}},[t._v("girl")]),t._v(" "),i("option",{attrs:{value:"3"}},[t._v("other")])])])],1),t._v(" "),i("yd-button-group",[i("yd-button",{attrs:{size:"large",type:"primary"},nativeOn:{click:function(e){return t.updateUserInfo(e)}}},[t._v("Save")])],1)],1)},staticRenderFns:[]};var f=i("VU/8")(c,d,!1,function(t){i("FrBS")},"data-v-b0556ed2",null);e.default=f.exports}});
//# sourceMappingURL=0.0954ae0189cba4a50fad.js.map