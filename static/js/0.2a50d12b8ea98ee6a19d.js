webpackJsonp([0],{"+Im3":function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=l("Wo3p"),i=l.n(s),o={APPLY_QINIUUPLOADTOKEN_API:"http://127.0.0.1:8000/qiniu/",QINIU_UPLOAD_HTTP_API:"http://up-z0.qiniu.com",QINIU_UPLOAD_HTTPS_API:"https://up.qbox.me"},a={data:function(){return{msg:"Vue ",error:null,buttonAvailable:!0,autoUpload:!0,file:{self:null,size:null,type:null,suffix:null},serverToken:{token:null,expire:null,key:null,url:null},successImages:[]}},methods:{uploadButtonOnClick:function(){this.buttonAvailable=!1;this.applyUploadToken(this.file.suffix,function(t){this.serverToken=t,this.uploadFileToQiniu()}.bind(this),function(t){this.buttonAvailable=!0,this.error=t}.bind(this))},fileInputOnChange:function(t){var e=t.currentTarget.files[0];null!=e?(this.showPreview=!0,this.file={self:e,size:e.size,type:e.type,suffix:e.name.substring(e.name.lastIndexOf(".")+1,e.name.length).toLowerCase()},this.previewImage(e),this.autoUpload&&this.uploadButtonOnClick()):this.reset()},reset:function(){this.file={self:null,size:null,type:null,suffix:null},this.error=null,this.buttonAvailable=!0},previewImage:function(t){if(window.FileReader){var e=new FileReader;e.onloadend=function(t){document.querySelector(".preview #image").src=t.target.result},e.readAsDataURL(t)}else console.warn("不支持 FileReader")},applyUploadToken:function(t,e,l){var s={suffix:t};this.$http.post(o.APPLY_QINIUUPLOADTOKEN_API,s).then(function(t){200===t.status?(e(t.data),console.log(t.data)):l("向服务器请求上传 token 失败")},function(){l("检查您的网络连接")})},uploadFileToQiniu:function(){var t=this;if(null!=this.file.self){console.log("开始上传文件");var e=new FormData;e.append("token",this.serverToken.token),e.append("file",this.file.self),e.append("key",this.serverToken.key),this.axios({method:"post",url:o.QINIU_UPLOAD_HTTP_API,headers:{"Content-Type":"multipart/form-data"},data:e}).then(function(e){200===e.status&&(console.log(e),t.successImages.push(t.serverToken.url),t.reset())},function(){t.error="上传文件到七牛异常"})}else this.error="上传文件到七牛异常"}}},n={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"uploader"},[null!=t.successImages&&t.successImages.length>0?l("div",{staticClass:"success-images"},[l("p",[t._v("上传列表")]),t._v(" "),l("ul",t._l(t.successImages,function(e,s){return l("li",{key:s},[l("p",[t._v(t._s(e))])])}))]):t._e(),t._v(" "),null!=t.error?l("p",{staticClass:"error-color"},[t._v("错误信息："+t._s(t.error))]):t._e(),t._v(" "),l("h1",[t._v(t._s(t.msg))]),t._v(" "),null!=t.file.size?l("div",{staticClass:"preview"},[l("img",{attrs:{id:"image"}}),t._v(" "),l("h3",[t._v("文件大小："+t._s(t.file.size/1024)+" KB")]),t._v(" "),l("h3",[t._v("文件类型："+t._s(t.file.type))])]):t._e(),t._v(" "),l("div",{staticClass:"upload-btn"},[l("input",{staticClass:"upload-img",attrs:{title:"",type:"file",accept:"image/*",name:"file"},on:{change:function(e){t.fileInputOnChange(e)}}}),t._v("\n    Upload"),l("yd-icon",{attrs:{size:"40px",name:"search"}})],1),t._v(" "),t.autoUpload?t._e():l("button",{attrs:{disabled:null!=t.file.size&&t.buttonAvailable?null:"disabled"},on:{click:function(e){t.uploadButtonOnClick()}}},[t._v("上传")])])},staticRenderFns:[]};var r=l("VU/8")(a,n,!1,function(t){l("ZL9Q")},"data-v-7f121a86",null).exports,u=l("r8FW"),c={components:{Radio:u.Radio,RadioGroup:u.RadioGroup,CellGroup:u.CellGroup,CellItem:u.CellItem,Vqiniu:r,CitySelect:u.CitySelect,CheckListItem:u.CheckListItem,CheckList:u.CheckList,TextArea:u.TextArea},data:function(){return{rooms:"",files:[],pet:"",guys:"",model2:"",district:i.a,show2:!1,show4:!1,checklist2:[],desc:""}},methods:{result2:function(t){console.log(t),this.model2=t.itemName1+" "+t.itemName2+" "+t.itemName3}}},d={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"upload"},[l("yd-layout",[l("h1",{staticClass:"title"},[t._v("Upload your room")]),t._v(" "),l("yd-cell-group",{attrs:{title:"Your house pictures"}},[l("Vqiniu")],1),t._v(" "),l("yd-cell-group",{attrs:{title:"Address"}},[l("yd-cell-item",{attrs:{arrow:""}},[l("span",{attrs:{slot:"left"},slot:"left"}),t._v(" "),l("input",{directives:[{name:"model",rawName:"v-model",value:t.model2,expression:"model2"}],attrs:{slot:"right",type:"text",readonly:"",placeholder:"Choose your address"},domProps:{value:t.model2},on:{click:function(e){e.stopPropagation(),t.show2=!0},input:function(e){e.target.composing||(t.model2=e.target.value)}},slot:"right"})])],1),t._v(" "),l("yd-cityselect",{ref:"cityselectDemo",attrs:{callback:t.result2,items:t.district,provance:"shanghai",city:"shanghai",area:""},model:{value:t.show2,callback:function(e){t.show2=e},expression:"show2"}}),t._v(" "),l("yd-cell-group",{attrs:{title:"房屋设施"}},[l("yd-cell-item",{attrs:{arrow:""},nativeOn:{click:function(e){t.show4=!0}}},[l("span",{attrs:{slot:"left"},slot:"left"},[t._v("Choose what you have"+t._s(t.checklist2))])])],1),t._v(" "),l("yd-popup",{attrs:{position:"bottom",height:"60%"},model:{value:t.show4,callback:function(e){t.show4=e},expression:"show4"}},[l("yd-checklist",{attrs:{align:"right"},model:{value:t.checklist2,callback:function(e){t.checklist2=e},expression:"checklist2"}},[l("yd-checklist-item",{attrs:{val:"Bath"}},[l("div",{staticStyle:{height:"50px","line-height":"50px"}},[t._v("Bath")])]),t._v(" "),l("yd-checklist-item",{attrs:{val:"Subway"}},[l("div",{staticStyle:{height:"50px","line-height":"50px"}},[t._v("Subway")])]),t._v(" "),l("yd-checklist-item",{attrs:{val:"3"}},[l("div",{staticStyle:{height:"50px","line-height":"50px"}},[t._v("cool shit")])])],1),t._v(" "),l("yd-button",{staticStyle:{margin:"30px"},attrs:{type:"warning"},nativeOn:{click:function(e){t.show4=!1}}},[t._v("Close Bottom Popup")])],1),t._v(" "),l("yd-cell-group",{attrs:{title:"Describe your awesome room.. "}},[l("yd-cell-item",[l("yd-textarea",{attrs:{slot:"right",placeholder:"Tell me your bank password",maxlength:"100"},slot:"right",model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}})],1)],1),t._v(" "),l("yd-cell-group",{attrs:{title:"My tips"}},[l("yd-cell-item",{attrs:{type:"label"}},[l("div",{attrs:{slot:"left"},slot:"left"},[t._v("Welcome pet? ")]),t._v(" "),l("yd-switch",{attrs:{slot:"right"},slot:"right",model:{value:t.pet,callback:function(e){t.pet=e},expression:"pet"}})],1),t._v(" "),l("yd-cell-item",{attrs:{type:"label"}},[l("div",{attrs:{slot:"left"},slot:"left"},[t._v("I dont like guys? ")]),t._v(" "),l("yd-switch",{attrs:{slot:"right"},slot:"right",model:{value:t.guys,callback:function(e){t.guys=e},expression:"guys"}})],1)],1),t._v(" "),l("yd-cell-group",{attrs:{title:""}},[l("yd-cell-item",{attrs:{arrow:""}},[l("span",{attrs:{slot:"left"},slot:"left"},[t._v("Gender : ")]),t._v(" "),l("select",{attrs:{slot:"right"},slot:"right"},[l("option",{attrs:{value:"1"}},[t._v("guy")]),t._v(" "),l("option",{attrs:{value:"2"}},[t._v("girl")]),t._v(" "),l("option",{attrs:{value:"3"}},[t._v("other")])])])],1)],1)],1)},staticRenderFns:[]},p=l("VU/8")(c,d,!1,null,null,null);e.default=p.exports},Wo3p:function(t,e,l){var s,i,o=[{v:"1",n:"jingan",c:[{v:"2817",n:"Nanjin xilu",c:[{v:"51973",n:"All"}]},{v:"2820",n:"Jiangansi",c:[{v:"51972",n:"All"}]}]},{v:"2",n:"xuhui",c:[{v:"485",n:"xujiahui",c:[{v:"51973",n:"All"}]},{v:"343",n:"Jiangansi",c:[{v:"51972",n:"All"}]}]},{v:"3",n:"pudong",c:[{v:"3913",n:"xujiahui",c:[{v:"1212",n:"All"}]},{v:"3914",n:"Jiangansi",c:[{v:"242",n:"All"}]}]}];void 0===(i="function"==typeof(s=o)?s.call(e,l,e,t):s)||(t.exports=i)},ZL9Q:function(t,e){}});
//# sourceMappingURL=0.2a50d12b8ea98ee6a19d.js.map